{"version":3,"sources":["img/img_kaikeba_logo_blue_new.png","img sync /^/.*/.png$","img/放假时间管理.png","img/新建假期.png","img/添加单节课程.png","img/添加课程-设置基本.png","img/添加课程-设置讲师.png","img/添加课程-调整课程.png","img/讲师管理.png","img/课程管理.png","img/首页.png","utils/utils.ts","component/Schedule.tsx","component/LessonChange.tsx","component/Teacher.tsx","component/MenuList.tsx","component/CalcTime.tsx","component/Holiday.tsx","App.tsx","serviceWorker.ts","index.tsx"],"names":["module","exports","map","webpackContext","req","id","webpackContextResolve","__webpack_require__","o","e","Error","code","keys","Object","resolve","isHoliday","date","holidayList","JSON","parse","localStorage","getItem","holidayRange","some","item","moment","isBetween","child","format","tmpDown","throttle","fn","delay","start","console","error","timer","arg","_this","this","apply","setTimeout","s2ab","s","buf","ArrayBuffer","length","view","Uint8Array","i","charCodeAt","getCharCol","n","m","String","fromCharCode","translateData","key","Option","cancel","Schedule","props","propData","data","term","setTerm","teacher","setTeacher","teacherColor","useState","allTermList","setAllTermList","end","termMessage","setTermMessage","setDate","lessonColor","setLessonColor","calendar","stopPropagation","keyCode","subtract","add","useEffect","axios","get","cancelToken","CancelToken","c","push","then","catch","forEach","off","window","onkeydown","style","padding","span","width","value","onChange","val","display","onSelect","className","dateCellRender","height","backgroundColor","lesson","count","weekday","textAlign","lineHeight","formItemLayout","labelCol","xs","sm","wrapperCol","steps","lessonModule","getTeacher","lessonTeacher","teacherListKey","match","RegExp","entries","log","teacherList","createLessonData","startDate","parity","realData","lessonDays","arr","isLesson","d","find","getLessonDay","values","reduce","prev","now","fromEntries","index","LessonChange","disabled","setDisabled","Date","setParity","stringify","lessonData","setLessonData","loading","setLoading","Number","current","setCurrent","list","setList","visible","setVisible","addLesson","getData","setData","propTerm","setItem","onCancel","footer","type","onClick","num","a","async","message","msg","clear","toString","Step","icon","LoadingOutlined","title","marginTop","onDragEnd","splice","destination","source","Item","label","target","droppableId","provided","ref","innerRef","droppableProps","draggableId","provided1","snapshot","draggableProps","dragHandleProps","actions","placeholder","colorChange","color","sColor","toLowerCase","test","sColorNew","slice","concat","sColorChange","parseInt","r","g","b","Teacher","setCount","setColor","cloneData","Group","compact","addonAfter","placement","trigger","content","rgb","onChangeComplete","onOk","method","url","success","MenuList","location","useLocation","selectedKeys","pathname","substr","mode","borderRight","to","CalcTime","TabPane","RangePicker","Holiday","activeKey","setActiveKey","dataKey","toUpperCase","tab","allowClear","Header","Sider","Content","defaults","baseURL","docs","App","exportVisible","setExportVisible","singleVisible","setSingleVisible","replace","singleData","setSingleData","exportTerm","setExportTerm","setTeacherColor","setOff","banner","useRef","page","next","removeItem","memorized","useMemo","float","src","require","alt","marginRight","danger","addEventListener","info","background","backgroundSize","removeEventListener","margin","minHeight","path","exact","render","component","from","res","first","firstWeekday","loop","addAllDay","entryRes","sort","isBefore","pushArr","time","result","json","tmpdata","unshift","keyMap","k","v","j","assign","position","outputPos","tmpWB","SheetNames","Sheets","Blob","XLSX","write","bookType","undefined","bookSST","href","URL","createObjectURL","revoke","revokeObjectURL","downloadExl","dateData","weekData","returnWeekday","flat","document","createElement","download","click","filter","Boolean","hostname","locale","ReactDOM","zhCN","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.bb9d2d71.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/img_kaikeba_logo_blue_new.c2a7a22f.png\";","var map = {\n\t\"./img_kaikeba_logo_blue_new.png\": 277,\n\t\"./放假时间管理.png\": 647,\n\t\"./新建假期.png\": 648,\n\t\"./添加单节课程.png\": 649,\n\t\"./添加课程-设置基本.png\": 650,\n\t\"./添加课程-设置讲师.png\": 651,\n\t\"./添加课程-调整课程.png\": 652,\n\t\"./讲师管理.png\": 653,\n\t\"./课程管理.png\": 654,\n\t\"./首页.png\": 655\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 646;","module.exports = __webpack_public_path__ + \"static/media/放假时间管理.4cb19262.png\";","module.exports = __webpack_public_path__ + \"static/media/新建假期.1c0e82c7.png\";","module.exports = __webpack_public_path__ + \"static/media/添加单节课程.cc32b4b2.png\";","module.exports = __webpack_public_path__ + \"static/media/添加课程-设置基本.a690d525.png\";","module.exports = __webpack_public_path__ + \"static/media/添加课程-设置讲师.fde142d9.png\";","module.exports = __webpack_public_path__ + \"static/media/添加课程-调整课程.cf3b303c.png\";","module.exports = __webpack_public_path__ + \"static/media/讲师管理.e84402d2.png\";","module.exports = __webpack_public_path__ + \"static/media/课程管理.5f43dfeb.png\";","module.exports = __webpack_public_path__ + \"static/media/首页.7230cd55.png\";","import moment from \"moment\";\r\nimport XLSX from \"xlsx\";\r\n\r\nconst nowYear: string = '2020';\r\n\r\nfunction spliceArrToDblArr<T>(arr: T[], length: number): T[][] {\r\n\tconst newArr: T[][] = [];\r\n\twhile (arr.length > 0) {\r\n\t\tnewArr.push(arr.splice(0, length));\r\n\t}\r\n\treturn newArr;\r\n}\r\n\r\nfunction isHoliday(date) {\r\n\tconst holidayList = JSON.parse(localStorage.getItem('holidayList') || '[]') as any[],\r\n\tholidayRange = JSON.parse(localStorage.getItem('holidayRange') || '[]') as any[];\r\n\treturn holidayRange?.some(item => moment(date).isBetween(item[0], item[1])) || holidayRange?.some(item => item.some(child => moment(date).format('YYYY-MM-DD') === child)) || holidayList?.some(item => moment(date).format('YYYY-MM-DD') === item);\r\n}\r\n\r\nconst getLessonDay = (startDate, parity, count) => {\r\n\tlet n = 0;\r\n\tlet arr: any = [];\r\n\tconst isLesson = (d) => {\r\n\t\td = moment(d);\r\n\t\tif (n < count) {\r\n\t\t\tif ((!(isHoliday(d)) && !!(parity.find(item => item === (moment(d).weekday() + 1))))) {\r\n\t\t\t\tn++;\r\n\t\t\t\tarr.push(d.format('YYYY-MM-DD'));\r\n\t\t\t}\r\n\t\t\td.add(1, 'd')\r\n\t\t\tisLesson(d);\r\n\t\t}\r\n\t};\r\n\tisLesson(startDate);\r\n\treturn arr;\r\n}\r\n\r\nfunction throttle(fn, delay = 200, start = true) {\r\n\tif (typeof fn !== \"function\") {\r\n\t\treturn console.error(\"请传入一个函数\");\r\n\t}\r\n\tlet timer = 0;\r\n\t// 返回处理过防抖的新函数\r\n\treturn function (...arg) {\r\n\t\t// @ts-ignore\r\n\t\tlet _this = this;\r\n\t\tif (timer) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tstart && fn.apply(_this, arg);\r\n\t\t// @ts-ignore\r\n\t\ttimer = setTimeout(() => {\r\n\t\t\t(!start) && fn.apply(_this, arg);\r\n\t\t\ttimer = 0;\r\n\t\t}, delay);\r\n\t}\r\n}\r\n\r\nvar tmpDown;\r\nconst downloadExl = (json, type) => {\r\n\tlet tmpdata: any = json[0];\r\n\tjson.unshift({});\r\n\tvar keyMap: any = []; //获取keys\r\n\tfor (var k in tmpdata) {\r\n\t\tkeyMap.push(k);\r\n\t\tjson[0][k] = k;\r\n\t}\r\n\ttmpdata = [];//用来保存转换好的json\r\n\tjson.map((v, i) => keyMap.map((k, j) => Object.assign({}, {\r\n\t\tv: v[k],\r\n\t\tposition: (j > 25 ? getCharCol(j) : String.fromCharCode(65 + j)) + (i + 1)\r\n\t}))).reduce((prev, next) => prev.concat(next)).forEach((v, i) => tmpdata[v.position] = {\r\n\t\tv: v.v\r\n\t});\r\n\tfor(let key in tmpdata){\r\n\t\t// console.log(key);\r\n\t\tlet  reg = /[A-Z]1$/g;\r\n\t\tif(reg.test(key)){\r\n\t\t\tdelete tmpdata[key];\r\n\t\t}\r\n\t}\r\n\tvar outputPos = Object.keys(tmpdata); //设置区域,比如表格从A1到D10\r\n\tvar tmpWB = {\r\n\t\tSheetNames: ['mySheet'], //保存的表标题\r\n\t\tSheets: {\r\n\t\t\t'mySheet': Object.assign({},\r\n\t\t\t\ttmpdata, //内容\r\n\t\t\t\t{\r\n\t\t\t\t\t'!ref': outputPos[0] + ':' + outputPos[outputPos.length - 1] //设置填充区域\r\n\t\t\t\t})\r\n\t\t}\r\n\t};\r\n\ttmpDown = new Blob([s2ab(XLSX.write(tmpWB,\r\n\t\t{bookType: (type === undefined ? 'xlsx':type),bookSST: false, type: 'binary'}//这里的数据是用来定义导出的格式类型\r\n\t))], {\r\n\t\ttype: \"\"\r\n\t}); //创建二进制对象写入转换好的字节流\r\n\tvar href = URL.createObjectURL(tmpDown); //创建对象超链接\r\n\treturn {\r\n\t\thref,\r\n\t\trevoke: () => {\r\n\t\t\tURL.revokeObjectURL(tmpDown);\r\n\t\t}\r\n\t};\r\n}\r\n\r\nconst s2ab = (s) => { //字符串转字符流\r\n\tlet buf = new ArrayBuffer(s.length);\r\n\tlet view = new Uint8Array(buf);\r\n\tfor (let i = 0; i !== s.length; ++i) view[i] = s.charCodeAt(i) & 0xFF;\r\n\treturn buf;\r\n}\r\n// 将指定的自然数转换为26进制表示。映射关系：[0-25] -> [A-Z]。\r\nconst getCharCol = (n) => {\r\n\tlet s = '',\r\n\t\tm = 0\r\n\twhile (n > 0) {\r\n\t\tm = n % 26 + 1\r\n\t\ts = String.fromCharCode(m + 64) + s\r\n\t\tn = (n - m) / 26\r\n\t}\r\n\treturn s\r\n}\r\n\r\nconst returnWeekday = (num) => {\r\n\tswitch (num) {\r\n\t\tcase 0:\r\n\t\t\treturn '周一';\r\n\t\tcase 1:\r\n\t\t\treturn '周二';\r\n\t\tcase 2:\r\n\t\t\treturn '周三';\r\n\t\tcase 3:\r\n\t\t\treturn '周四';\r\n\t\tcase 4:\r\n\t\t\treturn '周五';\r\n\t\tcase 5:\r\n\t\t\treturn '周六';\r\n\t\tcase 6:\r\n\t\t\treturn '周日';\r\n\t}\r\n}\r\n\r\nfunction translateData(key) {\r\n\tswitch (key) {\r\n\t\tcase 'term':\r\n\t\t\treturn '期数';\r\n\t\tcase 'teacher':\r\n\t\t\treturn '讲师';\r\n\t\tcase 'date':\r\n\t\t\treturn '日期';\r\n\t\tcase 'lesson':\r\n\t\t\treturn '课程内容';\r\n\t\tcase 'replace':\r\n\t\t\treturn '是否为替换课程';\r\n\t\tdefault :\r\n\t\t\treturn;\r\n\t}\r\n}\r\n\r\nexport {\r\n\tnowYear,\r\n\tspliceArrToDblArr,\r\n\tisHoliday,\r\n\tgetLessonDay,\r\n\tthrottle,\r\n\tdownloadExl,\r\n\treturnWeekday,\r\n\ttranslateData\r\n};\r\n","import React, {useEffect, useState} from 'react';\r\nimport {Badge, Calendar, Card, Row, Col, Select} from \"antd\";\r\nimport moment from \"moment\";\r\nimport axios from \"axios\";\r\nimport {isHoliday} from \"../utils/utils\";\r\n\r\ninterface IProps {\r\n\tdata?: any,\r\n\tterm?: any\r\n\tsetTerm?: any\r\n\tteacher?: any\r\n\tsetTeacher?: any\r\n\tteacherColor?: any\r\n\toff: Boolean\r\n}\r\n\r\nconst {Option} = Select;\r\n\r\nlet cancel: any = [];\r\n\r\nconst Schedule: React.FC<IProps> = (props) => {\r\n\tconst {\r\n\t\tdata: propData,\r\n\t\tterm,\r\n\t\tsetTerm,\r\n\t\tteacher,\r\n\t\tsetTeacher,\r\n\t\tteacherColor\r\n\t} = props;\r\n\tconst [allTermList, setAllTermList] = useState([]);\r\n\tconst [termMessage, setTermMessage] = useState({\r\n\t\tstart: '',\r\n\t\tend: ''\r\n\t});\r\n\tconst [date, setDate] = useState(moment());\r\n\tconst [lessonColor, setLessonColor] = useState({});\r\n\tconst calendar = e => {\r\n\t\te.stopPropagation();\r\n\t\tconst {keyCode} = e;\r\n\t\tswitch (keyCode) {\r\n\t\t\tcase 37:\r\n\t\t\t\tsetDate(moment(date.subtract(1, 'month')))\r\n\t\t\t\tbreak\r\n\t\t\tcase 39:\r\n\t\t\t\tsetDate(moment(date.add(1, 'month')))\r\n\t\t\t\tbreak\r\n\t\t}\r\n\t};\r\n\tuseEffect(() => {\r\n\t\taxios.get('/getTerm', {\r\n\t\t\tcancelToken: new axios.CancelToken((c) => {\r\n\t\t\t\tcancel.push(c);\r\n\t\t\t})\r\n\t\t})\r\n\t\t\t.then(({data}) => {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tsetAllTermList(['全部', ...data]);\r\n\t\t\t})\r\n\t\t\t.catch(e => {\r\n\t\t\t});\r\n\t\taxios.get('/getLessonColor', {\r\n\t\t\tcancelToken: new axios.CancelToken((c) => {\r\n\t\t\t\tcancel.push(c);\r\n\t\t\t})\r\n\t\t})\r\n\t\t\t.then(({data}) => {\r\n\t\t\t\tsetLessonColor(data.data)\r\n\t\t\t})\r\n\t\t\t.catch(e => {\r\n\t\t\t});\r\n\t\treturn () => {\r\n\t\t\tcancel.forEach(item => {\r\n\t\t\t\titem && item();\r\n\t\t\t});\r\n\t\t}\r\n\t}, []);\r\n\tuseEffect(() => {\r\n\t\tif (props.off) {\r\n\t\t\twindow.onkeydown = null\r\n\t\t} else {\r\n\t\t\twindow.onkeydown = calendar\r\n\t\t}\r\n\t\treturn () => {\r\n\t\t\twindow.onkeydown = null\r\n\t\t}\r\n\t}, [props.off])\r\n\tuseEffect(() => {\r\n\t\tlet cancel: any = null;\r\n\t\tif (term !== '全部') {\r\n\t\t\taxios.get(`/getTermMessage?term=${term}`, {\r\n\t\t\t\tcancelToken: new axios.CancelToken((c) => {\r\n\t\t\t\t\tcancel = c;\r\n\t\t\t\t})\r\n\t\t\t})\r\n\t\t\t\t.then(({data}) => {\r\n\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\tsetTermMessage({...data});\r\n\t\t\t\t})\r\n\t\t}\r\n\t\treturn () => {\r\n\t\t\tcancel && cancel();\r\n\t\t}\r\n\t}, [term])\r\n\treturn (\r\n\t\t<div id='calendar'>\r\n\t\t\t<Row style={{padding: '20px'}}>\r\n\t\t\t\t<Col span={8}>\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\t期数：\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<Select style={{width: '150px'}} value={term} onChange={(val) => {\r\n\t\t\t\t\t\tsetTerm(val);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tallTermList.map(term => <Option key={term} value={term}>{term}</Option>)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Select>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tterm !== '全部' &&\r\n\t\t\t\t\t\t<div style={{display: 'inline-block'}}>\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t当期信息：{moment(termMessage.start).format('YYYY-MM-DD')} 至{moment(termMessage.end).format('YYYY-MM-DD')}\r\n\t\t\t\t\t\t\t</span>\r\n\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t}\r\n\t\t\t\t</Col>\r\n\t\t\t\t<Col span={8}>\r\n\t\t\t\t\t<span>\r\n\t\t\t\t\t\t讲师：\r\n\t\t\t\t\t</span>\r\n\t\t\t\t\t<Select style={{width: '150px'}} value={teacher} onChange={(val) => {\r\n\t\t\t\t\t\tsetTeacher(val);\r\n\t\t\t\t\t}}>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t['全部', ...Object.keys(teacherColor)].map(teacher => <Option key={teacher} value={teacher}>{teacher}</Option>)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</Select>\r\n\t\t\t\t</Col>\r\n\t\t\t</Row>\r\n\t\t\t<Calendar\r\n\t\t\t\tonSelect={val => {\r\n\t\t\t\t\tsetDate(val)\r\n\t\t\t\t}}\r\n\t\t\t\tvalue={date}\r\n\t\t\t\tclassName='scheduleCalendar'\r\n\t\t\t\tdateCellRender={(date) => {\r\n\t\t\t\t\tif (propData?.[moment(date).format('YYYY-MM-DD')]) {\r\n\t\t\t\t\t\treturn propData[moment(date).format('YYYY-MM-DD')].map(item => (\r\n\t\t\t\t\t\t\t<Card key={item.term} style={{\r\n\t\t\t\t\t\t\t\theight: `${300 / propData[moment(date).format('YYYY-MM-DD')].length}px`,\r\n\t\t\t\t\t\t\t\tbackgroundColor: teacherColor[item.teacher]\r\n\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t{item.teacher}: {item.lesson}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t\t\t{<Badge style={{backgroundColor: lessonColor[item.term]}} count={item.term}/>}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</Card>\r\n\t\t\t\t\t\t))\r\n\t\t\t\t\t} else if (isHoliday(date) || (moment(date).weekday() === 6)) {\r\n\t\t\t\t\t\treturn <div\r\n\t\t\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\t\t\ttextAlign: 'center',\r\n\t\t\t\t\t\t\t\tlineHeight: '300px'\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t放假\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn ''\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t\t// value={day}\r\n\t\t\t\t// onPanelChange={value => {\r\n\t\t\t\t// \tsetDay(value as Moment);\r\n\t\t\t\t// }}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\n\r\nexport default Schedule;\r\n","import React, { useEffect, useState } from 'react';\r\nimport { DragDropContext, Droppable, Draggable } from \"react-beautiful-dnd\";\r\nimport moment from \"moment\";\r\nimport {\r\n\tButton,\r\n\tmessage,\r\n\tModal,\r\n\tSteps,\r\n\tForm,\r\n\tInput,\r\n\tDatePicker,\r\n\tList,\r\n\tInputNumber,\r\n\tSelect\r\n} from \"antd\";\r\nimport { LoadingOutlined } from \"@ant-design/icons\";\r\nimport { getLessonDay } from \"../utils/utils\";\r\n\r\nconst formItemLayout = {\r\n\tlabelCol: {\r\n\t\txs: { span: 24 },\r\n\t\tsm: { span: 8 },\r\n\t},\r\n\twrapperCol: {\r\n\t\txs: { span: 24 },\r\n\t\tsm: { span: 16 },\r\n\t},\r\n};\r\n\r\nconst steps = ['设置基本信息', '设置讲师信息', '调整课程时间', '完成'];\r\n\r\nlet lessonModule: any = {\r\n\t'es6基础': 1,\r\n\t'面向对象': 4,\r\n\t'es6高阶': 2,\r\n\t'promise原理': 1,\r\n\t'git': 1,\r\n\t'函数式编程': 1,\r\n\t'node': 4,\r\n\t'前后端交互': 4,\r\n\t'webpack': 2,\r\n\t'vue2.0': 6,\r\n\t'vue3.0': 4,\r\n\t'react': 8,\r\n\t'移动端': 2,\r\n\t'd3': 2,\r\n\t'echarts': 3,\r\n\t'小程序': 4,\r\n\t'面试': 4\r\n};\r\nlessonModule = Object.entries(lessonModule);\r\nconsole.log('lessonModule', lessonModule);\r\n\r\nfunction getTeacher(lesson, lessonTeacher) {\r\n\tlet teacher = '';\r\n\tfor (const teacherListKey in lessonTeacher) {\r\n\t\tconst match = lesson.match(new RegExp(teacherListKey));\r\n\t\tmatch && (teacher = match[0]);\r\n\t}\r\n\treturn lessonTeacher[teacher]\r\n}\r\n\r\nlet lessonTeacher: any = {\r\n\t'es6基础': '海哥哥',\r\n\t'面向对象': '海哥哥',\r\n\t'es6高阶': '海哥哥',\r\n\t'promise原理': '海哥哥',\r\n\t'git': '海哥哥',\r\n\t'函数式编程': '海哥哥',\r\n\t'node': '钟老师',\r\n\t'前后端交互': '钟老师',\r\n\t'webpack': '钟老师',\r\n\t'vue': '效瑞老师',\r\n\t'react': '莫莫',\r\n\t'移动端': '彭小龙',\r\n\t'd3': '李伟老师',\r\n\t'echarts': '李伟老师',\r\n\t'小程序': '李伟老师',\r\n\t'面试': '不知道'\r\n};\r\nconst teacherList = ['不知道', '钟老师', '莫莫', '效瑞老师', '海哥哥', '李伟老师', '彭小龙'];\r\nlet createLessonData = (data, startDate, term, parity, lessonTeacher) => {\r\n\tlet realData: any[] = [];\r\n\tObject.entries(data).forEach(item => {\r\n\t\t// @ts-ignore\r\n\t\tfor (let i = 1; i <= item[1]; i++) {\r\n\t\t\trealData.push(item[0] + '-' + 0 + i);\r\n\t\t}\r\n\t});\r\n\t// @ts-ignore\r\n\tlet lessonDays = getLessonDay(startDate, parity, Object.values(data).reduce((prev, now) => prev as number + now as number));\r\n\treturn Object.fromEntries(lessonDays.map((item, index) => [\r\n\t\t[item],\r\n\t\t[{ lesson: realData[index], teacher: getTeacher(realData[index], lessonTeacher), term }]\r\n\t]));\r\n}\r\n\r\nconst LessonChange = props => {\r\n\tconst [disabled, setDisabled] = useState(false);\r\n\tconst [term, setTerm] = useState(localStorage.getItem('term') || '');\r\n\tconst [date, setDate] = useState(moment(localStorage.getItem('date') || new Date()));\r\n\tconst [parity, setParity] = useState(JSON.parse(localStorage.getItem('parity') || '[]'));\r\n\tconst [lessonData, setLessonData] = useState(JSON.parse(localStorage.getItem('data') || JSON.stringify(lessonModule)));\r\n\tconst [loading, setLoading] = useState(false);\r\n\tconst [current, setCurrent] = useState(Number(localStorage.getItem('current')) || 0);\r\n\tconst [list, setList] = useState(JSON.parse(localStorage.getItem('list') || JSON.stringify(lessonTeacher)));\r\n\tconst { visible, setVisible, addLesson, getData, setData, term: propTerm, teacher } = props;\r\n\tuseEffect(() => {\r\n\t\tlocalStorage.setItem('data', JSON.stringify(lessonData));\r\n\t}, [lessonData]);\r\n\tuseEffect(() => {\r\n\t\tlet parity = (((moment(date).weekday() + 1) % 2 === 0) && ((moment(date).weekday() + 1) >= 1 && (moment(date).weekday() + 1) <= 6)) ? [2, 4, 6] : [1, 3, 5];\r\n\t\tsetParity(parity);\r\n\t}, [date]);\r\n\treturn (\r\n\t\t<Modal\r\n\t\t\tvisible={visible}\r\n\t\t\tonCancel={() => {\r\n\t\t\t\tsetVisible(false);\r\n\t\t\t}}\r\n\t\t\twidth={620}\r\n\t\t\tfooter={<div>\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrent > 0 &&\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ttype='primary'\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tlet num = current;\r\n\t\t\t\t\t\t\tsetCurrent(--num);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t上一步\r\n\t\t\t\t\t\t</Button>\r\n\t\t\t\t}\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrent < 2 ?\r\n\t\t\t\t\t\t<Button\r\n\t\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\t\tsetVisible(false);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t关闭\r\n\t\t\t\t\t\t</Button> :\r\n\t\t\t\t\t\t''\r\n\t\t\t\t}\r\n\t\t\t\t<Button\r\n\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\ttype='primary'\r\n\t\t\t\t\tonClick={async () => {\r\n\t\t\t\t\t\tswitch (current) {\r\n\t\t\t\t\t\t\tcase 0:\r\n\t\t\t\t\t\t\t\tsetCurrent(1);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 1:\r\n\t\t\t\t\t\t\t\tsetCurrent(2);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 2:\r\n\t\t\t\t\t\t\t\tsetDisabled(true);\r\n\t\t\t\t\t\t\t\tsetLoading(true);\r\n\t\t\t\t\t\t\t\tconst { data } = await addLesson({\r\n\t\t\t\t\t\t\t\t\tterm,\r\n\t\t\t\t\t\t\t\t\tdata: createLessonData(Object.fromEntries(lessonData), date, term, parity, list)\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\tmessage[data?.code ? 'success' : 'error'](data?.msg);\r\n\t\t\t\t\t\t\t\tsetDisabled(false);\r\n\t\t\t\t\t\t\t\tsetLoading(false);\r\n\t\t\t\t\t\t\t\tsetCurrent(3);\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 3:\r\n\t\t\t\t\t\t\t\tgetData(setData, propTerm, teacher);\r\n\t\t\t\t\t\t\t\tsetCurrent(0);\r\n\t\t\t\t\t\t\t\tsetVisible(false);\r\n\t\t\t\t\t\t\t\tsetTerm('');\r\n\t\t\t\t\t\t\t\tsetLessonData(lessonModule);\r\n\t\t\t\t\t\t\t\tsetDate(moment());\r\n\t\t\t\t\t\t\t\tsetParity([]);\r\n\t\t\t\t\t\t\t\tsetList({});\r\n\t\t\t\t\t\t\t\tlocalStorage.clear();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (current !== 3) {\r\n\t\t\t\t\t\t\tlocalStorage.setItem('current', (current + 1).toString());\r\n\t\t\t\t\t\t\tlocalStorage.setItem('term', term);\r\n\t\t\t\t\t\t\tlocalStorage.setItem('parity', JSON.stringify(parity));\r\n\t\t\t\t\t\t\tlocalStorage.setItem('list', JSON.stringify(list));\r\n\t\t\t\t\t\t\tlocalStorage.setItem('date', date.toString());\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tcurrent < 2 ?\r\n\t\t\t\t\t\t\t'下一步' :\r\n\t\t\t\t\t\t\tcurrent === 2 ?\r\n\t\t\t\t\t\t\t\t'提交' :\r\n\t\t\t\t\t\t\t\t'完成'\r\n\t\t\t\t\t}\r\n\t\t\t\t</Button>\r\n\t\t\t</div>}\r\n\t\t>\r\n\t\t\t<div style={{ padding: 20 }}>\r\n\t\t\t\t<Steps\r\n\t\t\t\t\tcurrent={current}\r\n\t\t\t\t>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tsteps.map(item => (\r\n\t\t\t\t\t\t\t<Steps.Step\r\n\t\t\t\t\t\t\t\ticon={(loading && (item === '调整课程时间')) ? <LoadingOutlined /> : ''}\r\n\t\t\t\t\t\t\t\tkey={item}\r\n\t\t\t\t\t\t\t\ttitle={item}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t))\r\n\t\t\t\t\t}\r\n\t\t\t\t</Steps>\r\n\t\t\t\t<div style={{ marginTop: 30 }}>\r\n\t\t\t\t\t<DragDropContext\r\n\t\t\t\t\t\tonDragEnd={end => {\r\n\t\t\t\t\t\t\t// 事情在这里搞 end就行 里面有source是从哪里来 destination是去哪儿 然后对数据处理一下看看能不能行\r\n\t\t\t\t\t\t\tlet data = lessonData.map(item => [...item]);\r\n\t\t\t\t\t\t\tdata.splice(end.destination?.index, 0, data.splice(end.source?.index, 1)[0]);\r\n\t\t\t\t\t\t\tsetLessonData(JSON.parse(JSON.stringify(data)));\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t!current && (\r\n\t\t\t\t\t\t\t\t<Form {...formItemLayout}>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"期数\">\r\n\t\t\t\t\t\t\t\t\t\t<Input value={term} onChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetTerm(e.target.value);\r\n\t\t\t\t\t\t\t\t\t\t}} />\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"课程起始时间\">\r\n\t\t\t\t\t\t\t\t\t\t<DatePicker value={date} onChange={date => {\r\n\t\t\t\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\t\t\t\tsetDate(date);\r\n\t\t\t\t\t\t\t\t\t\t}} />\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t<Form.Item label=\"上课时间\">\r\n\t\t\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={JSON.stringify(parity) === '[]' ? '' : JSON.stringify(parity)}\r\n\t\t\t\t\t\t\t\t\t\t\tonChange={val => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetParity(JSON.parse(val));\r\n\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t<Select.Option\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue='[1,3,5]'\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t一三五上课\r\n\t\t\t\t\t\t\t\t\t\t\t</Select.Option>\r\n\t\t\t\t\t\t\t\t\t\t\t<Select.Option\r\n\t\t\t\t\t\t\t\t\t\t\t\tvalue='[2,4,6]'\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t二四六上课\r\n\t\t\t\t\t\t\t\t\t\t\t</Select.Option>\r\n\t\t\t\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tcurrent === 1 && (\r\n\t\t\t\t\t\t\t\t<Form {...formItemLayout}>\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tObject.entries(list).map(item => (\r\n\t\t\t\t\t\t\t\t\t\t\t<Form.Item label={item[0]} key={item[0]}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Select value={item[1]} onChange={(val) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet data = Object.entries(list);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata = data.map(data => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (data[0] !== item[0]) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn data;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn [data[0], val];\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetList(Object.fromEntries(data));\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}}>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tteacherList.map(item => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Select.Option\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={item}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={item}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{item}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Select.Option>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</Form>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tcurrent === 2 && (\r\n\t\t\t\t\t\t\t\t<Droppable\r\n\t\t\t\t\t\t\t\t\tdroppableId='1'\r\n\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tprovided => (\r\n\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\tref={provided.innerRef}\r\n\t\t\t\t\t\t\t\t\t\t\t\t{...provided.droppableProps}\r\n\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<List>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlessonData?.map((item, index) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<Draggable\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdraggableId={item[0]}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tindex={index}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={item[0]}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{(provided1, snapshot) => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<div\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tref={provided1.innerRef}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...provided1.draggableProps}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{...provided1.dragHandleProps}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t<List.Item\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tactions={[<InputNumber\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={item[1]}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tonChange={(val) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet data = lessonData.map(item => [...item]);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tdata[index][1] = val;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetLessonData(data);\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>]}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\titem[0]\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</List.Item>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t</Draggable>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</List>\r\n\t\t\t\t\t\t\t\t\t\t\t\t{provided.placeholder}\r\n\t\t\t\t\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</Droppable>\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t</DragDropContext>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</Modal>\r\n\t)\r\n};\r\n\r\nexport default LessonChange;\r\n","import React, {useEffect, useState} from 'react';\r\nimport {Form, Input, Popover, Button, Modal, message} from \"antd\";\r\nimport {SketchPicker} from 'react-color';\r\nimport axios from \"axios\";\r\n\r\ninterface Iprops {\r\n\ttype: string\r\n}\r\n\r\nconst formItemLayout = {\r\n\tlabelCol: {\r\n\t\txs: {span: 24},\r\n\t\tsm: {span: 4},\r\n\t},\r\n\twrapperCol: {\r\n\t\txs: {span: 24},\r\n\t\tsm: {span: 20},\r\n\t},\r\n};\r\n\r\nconst colorChange = (color) => {\r\n\tvar reg = /^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/;\r\n\tvar sColor = color.toLowerCase();\r\n\tif (sColor && reg.test(sColor)) {\r\n\t\tif (sColor.length === 4) {\r\n\t\t\tvar sColorNew = \"#\";\r\n\t\t\tfor (let i = 1; i < 4; i += 1) {\r\n\t\t\t\tsColorNew += sColor.slice(i, i + 1).concat(sColor.slice(i, i + 1));\r\n\t\t\t}\r\n\t\t\tsColor = sColorNew;\r\n\t\t}\r\n\t\tvar sColorChange = [];\r\n\t\tfor (let i = 1; i < 7; i += 2) {\r\n\t\t\t// @ts-ignore\r\n\t\t\tsColorChange.push(parseInt(\"0x\" + sColor.slice(i, i + 2)));\r\n\t\t}\r\n\t\treturn {r: sColorChange[0], g: sColorChange[1], b: sColorChange[2], a: 1};\r\n\t} else {\r\n\t\treturn sColor;\r\n\t}\r\n};\r\n\r\nconst Teacher: React.FC<Iprops> = props => {\r\n\tconst {type} = props;\r\n\tconst [data, setData] = useState({});\r\n\tconst [visible, setVisible] = useState(false);\r\n\tconst [teacher, setTeacher] = useState('');\r\n\tconst [count, setCount] = useState(0);\r\n\tuseEffect(() => {\r\n\t\taxios.get(`/get${type}Color`)\r\n\t\t\t.then(({data}) => {\r\n\t\t\t\tsetData(data.data);\r\n\t\t\t});\r\n\t}, [count, type]);\r\n\tconst setColor = (item, value) => {\r\n\t\tlet cloneData = JSON.parse(JSON.stringify(data));\r\n\t\tcloneData = Object.fromEntries(Object.entries(cloneData)\r\n\t\t\t.map(data => {\r\n\t\t\t\tif (data[0] === item) {\r\n\t\t\t\t\treturn [item, value];\r\n\t\t\t\t} else {\r\n\t\t\t\t\treturn data;\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t)\r\n\t\tsetData(cloneData);\r\n\t};\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<div>\r\n\t\t\t\t<Button\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\tsetVisible(true);\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t{type === 'Teacher' ? '添加讲师' : '添加课程'}\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t\t<Form {...formItemLayout}>\r\n\t\t\t\t{\r\n\t\t\t\t\tObject.entries(data)?.map(item => (\r\n\t\t\t\t\t\t<Form.Item\r\n\t\t\t\t\t\t\tlabel={item[0]}\r\n\t\t\t\t\t\t\tkey={item[0]}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t<Input.Group\r\n\t\t\t\t\t\t\t\tcompact={true}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\t\tvalue={item[1]}\r\n\t\t\t\t\t\t\t\t\tonChange={(e) => {\r\n\t\t\t\t\t\t\t\t\t\tlet value = e.target.value;\r\n\t\t\t\t\t\t\t\t\t\tsetColor(item[0], value);\r\n\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\taddonAfter={<Popover\r\n\t\t\t\t\t\t\t\t\t\tplacement=\"bottom\"\r\n\t\t\t\t\t\t\t\t\t\ttrigger=\"click\"\r\n\t\t\t\t\t\t\t\t\t\tcontent={\r\n\t\t\t\t\t\t\t\t\t\t\t<SketchPicker\r\n\t\t\t\t\t\t\t\t\t\t\t\tcolor={colorChange(item[1])}\r\n\t\t\t\t\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChange={(color) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet value = `rgba(${color.rgb.r}, ${color.rgb.g}, ${color.rgb.b}, ${color.rgb.a})`;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetColor(item[0], value);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonChangeComplete={(color) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet value = `rgba(${color.rgb.r}, ${color.rgb.g}, ${color.rgb.b}, ${color.rgb.a})`;\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tsetColor(item[0], value);\r\n\t\t\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<Button type='primary'>\r\n\t\t\t\t\t\t\t\t\t\t\t选择颜色\r\n\t\t\t\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t\t\t</Popover>}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t</Input.Group>\r\n\t\t\t\t\t\t</Form.Item>\r\n\t\t\t\t\t))\r\n\t\t\t\t}\r\n\t\t\t</Form>\r\n\t\t\t<Modal\r\n\t\t\t\ttitle={type === 'Teacher' ? '添加讲师' : '添加课程'}\r\n\t\t\t\tvisible={visible}\r\n\t\t\t\tonOk={() => {\r\n\t\t\t\t\tsetData({...data, [teacher]: '#fff'});\r\n\t\t\t\t\tsetTeacher('');\r\n\t\t\t\t\tsetVisible(false);\r\n\t\t\t\t}}\r\n\t\t\t\tonCancel={() => {\r\n\t\t\t\t\tsetVisible(false);\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<Input\r\n\t\t\t\t\tvalue={teacher}\r\n\t\t\t\t\tonChange={e => {\r\n\t\t\t\t\t\tsetTeacher(e.target.value)\r\n\t\t\t\t\t}}\r\n\t\t\t\t/>\r\n\t\t\t</Modal>\r\n\t\t\t<div style={{textAlign: 'right'}}>\r\n\t\t\t\t<Button\r\n\t\t\t\t\ttype='primary'\r\n\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\taxios({\r\n\t\t\t\t\t\t\tmethod: 'post',\r\n\t\t\t\t\t\t\turl: `/update${type}Color`,\r\n\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\tdata\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).then(() => {\r\n\t\t\t\t\t\t\tlet num = count;\r\n\t\t\t\t\t\t\tsetCount(++num);\r\n\t\t\t\t\t\t\tmessage.success('保存成功');\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t保存\r\n\t\t\t\t</Button>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n};\r\n\r\nexport default Teacher;\r\n","import React from 'react';\r\nimport {Menu} from \"antd\";\r\nimport {Link} from \"react-router-dom\";\r\nimport {useLocation} from \"react-router-dom\";\r\n\r\nconst MenuList = props => {\r\n\tlet location = useLocation();\r\n    return (\r\n\t    <Menu\r\n\t\t    selectedKeys={[location.pathname.substr(1)]}\r\n\t\t    mode=\"inline\"\r\n\t\t    style={{\r\n\t\t\t    height: '100%',\r\n\t\t\t    borderRight: 0\r\n\t\t    }}\r\n\t    >\r\n\r\n\t\t    <Menu.Item key=\"schedule\">\r\n\t\t\t    <Link to='schedule'>\r\n\t\t\t\t    课程表\r\n\t\t\t    </Link>\r\n\t\t    </Menu.Item>\r\n\t\t    <Menu.Item key=\"teacher\">\r\n\t\t\t    <Link to='teacher'>\r\n\t\t\t\t    讲师管理\r\n\t\t\t    </Link>\r\n\t\t    </Menu.Item>\r\n\t\t    <Menu.Item key=\"lesson\">\r\n\t\t\t    <Link to='lesson'>\r\n\t\t\t\t    课程管理\r\n\t\t\t    </Link>\r\n\t\t    </Menu.Item>\r\n\t\t    <Menu.Item key=\"calculate\">\r\n\t\t\t    <Link to='calculate'>\r\n\t\t\t\t    统计课时\r\n\t\t\t    </Link>\r\n\t\t    </Menu.Item>\r\n\t\t    <Menu.Item key=\"holiday\">\r\n\t\t\t    <Link to='holiday'>\r\n\t\t\t\t    放假时间管理\r\n\t\t\t    </Link>\r\n\t\t    </Menu.Item>\r\n\t    </Menu>\r\n    )\r\n};\r\n\r\nexport default MenuList;\r\n","import React from 'react';\r\nimport {Button} from \"antd\";\r\n// const {ipcRenderer} = window.require('electron');\r\n\r\nconst CalcTime = props => {\r\n    return (\r\n        <div>\r\n            <Button\r\n                type='primary'\r\n                onClick={() => {\r\n                    // ipcRenderer.send('getUrl', 111);\r\n                }}\r\n            >\r\n                选择文件夹\r\n            </Button>\r\n        </div>\r\n    )\r\n};\r\n\r\nexport default CalcTime;\r\n","import React, {useState} from 'react';\r\nimport {Calendar, Button, Row, Card, Modal, Tabs, DatePicker, message} from \"antd\";\r\nimport {isHoliday} from \"../utils/utils\";\r\nimport moment from 'moment';\r\nimport axios from \"axios\";\r\n\r\nconst {TabPane} = Tabs;\r\nconst {RangePicker} = DatePicker;\r\n\r\nconst Holiday = props => {\r\n\tconst [visible, setVisible] = useState(false);\r\n\tconst [activeKey, setActiveKey] = useState('range');\r\n\tconst [date, setDate] = useState<any>([]);\r\n\treturn (\r\n        <Card>\r\n\t        <Row>\r\n\t\t        <Button\r\n\t\t            type='primary'\r\n\t\t            onClick={() => {\r\n\t\t            \tsetVisible(true);\r\n\t\t            }}\r\n\t            >\r\n\t\t\t        新建\r\n\t\t        </Button>\r\n\t        </Row>\r\n\t        <Calendar\r\n\t            dateCellRender={moment => {\r\n\t\t            if (isHoliday(moment.format('YYYY-MM-DD'))) return '假期'\r\n\t\t            return ''\r\n\t            }}\r\n\t        />\r\n\t        <Modal\r\n\t\t        visible={visible}\r\n\t\t        title='选择假期时间'\r\n\t\t        onCancel={() => {\r\n\t\t        \tsetVisible(false);\r\n\t\t        }}\r\n\t\t        onOk={() => {\r\n\t\t        \taxios({\r\n\t\t\t\t        method: 'post',\r\n\t\t\t\t        url: '/addHoliday',\r\n\t\t\t\t        data: {\r\n\t\t\t\t        \ttype: activeKey,\r\n\t\t\t\t\t        data: date\r\n\t\t\t\t        }\r\n\t\t\t        }).then(({data}) => {\r\n\t\t\t        \tdata.code === 1 ?\r\n\t\t\t\t            message.success('保存成功') :\r\n\t\t\t\t\t        message.error('保存失败');\r\n\t\t\t\t        axios.get('/getHolidayList&Range')\r\n\t\t\t\t\t        .then(({data}) => {\r\n\t\t\t\t\t\t        for (const dataKey in data) {\r\n\t\t\t\t\t\t\t        localStorage.setItem('holiday' + dataKey.substr(0, 1).toUpperCase() + dataKey.substr(1), JSON.stringify(data[dataKey]))\r\n\t\t\t\t\t\t        }\r\n\t\t\t\t\t\t        setVisible(false);\r\n\t\t\t\t\t\t        setDate([moment().format('YYYY-MM-DD')]);\r\n\t\t\t\t\t        });\r\n\t\t\t        });\r\n\t\t        }}\r\n\t        >\r\n\t\t        <Tabs activeKey={activeKey} onChange={(activeKey) => {\r\n\t\t        \tif (activeKey === 'list') setDate([moment().format('YYYY-MM-DD')]);\r\n\t\t\t        else setDate([]);\r\n\t\t\t        setActiveKey(activeKey);\r\n\t\t        }}>\r\n\t\t\t        <TabPane tab='选择假期范围' key='range'>\r\n\t\t\t\t        <RangePicker\r\n\t\t\t\t\t        allowClear={false}\r\n\t\t\t\t\t        value={date.map(item => moment(item))}\r\n\t\t\t\t\t        onChange={moment => {\r\n\t\t\t\t\t\t        setDate(moment?.map(item => item?.format('YYYY-MM-DD')))\r\n\t\t\t\t\t        }}\r\n\t\t\t\t        />\r\n\t\t\t        </TabPane>\r\n\t\t\t        <TabPane tab='选择单日假期' key='list'>\r\n\t\t\t\t       <DatePicker\r\n\t\t\t\t\t       allowClear={false}\r\n\t\t\t\t\t       value={moment(date[0])}\r\n\t\t\t\t\t       onChange={moment => {\r\n\t\t\t\t\t\t\t\tsetDate([moment?.format('YYYY-MM-DD')])\r\n\t\t\t\t\t       }}\r\n\t\t\t\t       />\r\n\t\t\t        </TabPane>\r\n\t\t        </Tabs>\r\n\t        </Modal>\r\n        </Card>\r\n    )\r\n};\r\n\r\nexport default Holiday;\r\n","import React, { useState, useEffect, useMemo, useRef } from 'react';\r\nimport { Switch, Route, Redirect } from 'react-router-dom';\r\nimport './App.css';\r\nimport {\r\n\tLayout,\r\n\tButton,\r\n\tModal,\r\n\tForm,\r\n\tSelect,\r\n\tInput,\r\n\tDatePicker,\r\n\tRadio,\r\n\tCarousel\r\n} from \"antd\";\r\nimport Schedule from \"./component/Schedule\";\r\nimport axios from \"axios\";\r\nimport LessonChange from \"./component/LessonChange\";\r\nimport Teacher from \"./component/Teacher\";\r\nimport moment, { Moment } from 'moment';\r\nimport { downloadExl, isHoliday, returnWeekday, throttle, translateData } from \"./utils/utils\";\r\nimport MenuList from \"./component/MenuList\";\r\nimport CalcTime from \"./component/CalcTime\";\r\nimport Holiday from \"./component/Holiday\";\r\n\r\nconst { Header, Sider, Content } = Layout;\r\n\r\nlet cancel: any = [];\r\n\r\nlet addLesson = (data) => {\r\n\treturn axios({\r\n\t\tmethod: 'post',\r\n\t\turl: 'addTerm',\r\n\t\tdata\r\n\t});\r\n};\r\n\r\naxios.defaults.baseURL = '/api/';\r\n\r\nfunction getData(setData, term, teacher) {\r\n\taxios.get(`/getData?term=${term}&teacher=${teacher}`, {\r\n\t\tcancelToken: new axios.CancelToken((c) => {\r\n\t\t\tcancel.push(c);\r\n\t\t})\r\n\t})\r\n\t\t.then(({ data }) => {\r\n\t\t\tif (data.code) {\r\n\t\t\t\tsetData(data.data);\r\n\t\t\t}\r\n\t\t});\r\n}\r\n\r\nconst formItemLayout = {\r\n\tlabelCol: {\r\n\t\txs: { span: 24 },\r\n\t\tsm: { span: 8 },\r\n\t},\r\n\twrapperCol: {\r\n\t\txs: { span: 24 },\r\n\t\tsm: { span: 16 },\r\n\t},\r\n};\r\n\r\nfunction addAllDay(now, end, data) {\r\n\tfunction loop(now) {\r\n\t\tnow = moment(now)\r\n\t\tif (moment(now).format('YYYY-MM-DD') === moment(end).format('YYYY-MM-DD')) return;\r\n\t\tdata[moment(now).format('YYYY-MM-DD')] = data[moment(now).format('YYYY-MM-DD')] || [];\r\n\t\tnow.add(1, 'd');\r\n\t\tloop(now);\r\n\t}\r\n\r\n\tloop(now);\r\n}\r\n\r\nconst docs = [\r\n\t'首页',\r\n\t'放假时间管理',\r\n\t'新建假期',\r\n\t'添加课程-设置基本',\r\n\t'添加课程-设置讲师',\r\n\t'添加课程-调整课程',\r\n\t'添加单节课程',\r\n\t'讲师管理',\r\n\t'课程管理'\r\n]\r\n\r\nconst App: React.FC = () => {\r\n\tconst [term, setTerm] = useState('全部');\r\n\tconst [teacher, setTeacher] = useState('全部');\r\n\tconst [visible, setVisible] = useState(false);\r\n\tconst [exportVisible, setExportVisible] = useState(false);\r\n\tconst [singleVisible, setSingleVisible] = useState(false);\r\n\tconst [singleData, setSingleData] = useState({\r\n\t\tterm: '',\r\n\t\tdate: moment().format('YYYY-MM-DD'),\r\n\t\tteacher: '',\r\n\t\tlesson: '',\r\n\t\treplace: false\r\n\t});\r\n\tconst [exportTerm, setExportTerm] = useState('');\r\n\tconst [allTermList, setAllTermList] = useState([]);\r\n\tconst [teacherColor, setTeacherColor] = useState({});\r\n\tconst [data, setData] = useState();\r\n\tconst [off, setOff] = useState(false);\r\n\tconst banner = useRef<any>(null);\r\n\tconst page = ({ keyCode }) => {\r\n\t\tswitch (keyCode) {\r\n\t\t\tcase 37:\r\n\t\t\t\tbanner.current.prev()\r\n\t\t\t\tbreak\r\n\t\t\tcase 39:\r\n\t\t\t\tbanner.current.next()\r\n\t\t\t\tbreak\r\n\t\t}\r\n\t};\r\n\tuseEffect(() => {\r\n\t\t// 渲染完毕后就删除本地缓存\r\n\t\tlocalStorage.removeItem('Console');\r\n\t\tlocalStorage.removeItem('Console/Mode');\r\n\t\tlocalStorage.removeItem('NavigationWidth');\r\n\t\tlocalStorage.removeItem('date');\r\n\t\tlocalStorage.removeItem('length');\r\n\t\tlocalStorage.removeItem('parity');\r\n\t\tlocalStorage.removeItem('term');\r\n\t\tlocalStorage.removeItem('current');\r\n\t\tlocalStorage.removeItem('data');\r\n\t\tlocalStorage.removeItem('list');\r\n\t\tlocalStorage.removeItem('holidayRange');\r\n\t\tlocalStorage.removeItem('holidayList');\r\n\r\n\t\taxios.get('/getTeacherColor', {\r\n\t\t\tcancelToken: new axios.CancelToken((c) => {\r\n\t\t\t\tcancel.push(c);\r\n\t\t\t})\r\n\t\t})\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tsetTeacherColor(data.data)\r\n\t\t\t})\r\n\t\t\t.catch(e => {\r\n\t\t\t});\r\n\t\taxios.get('/getHolidayList&Range')\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\tfor (const dataKey in data) {\r\n\t\t\t\t\tlocalStorage.setItem('holiday' + dataKey.substr(0, 1).toUpperCase() + dataKey.substr(1), JSON.stringify(data[dataKey]))\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t}, []);\r\n\tuseEffect(() => {\r\n\t\tgetData(setData, term, teacher);\r\n\t\taxios.get('/getTerm', {\r\n\t\t\tcancelToken: new axios.CancelToken((c) => {\r\n\t\t\t\tcancel.push(c);\r\n\t\t\t})\r\n\t\t})\r\n\t\t\t.then(({ data }) => {\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tsetAllTermList([...data]);\r\n\t\t\t});\r\n\t\treturn () => {\r\n\t\t\tcancel.forEach(item => {\r\n\t\t\t\titem && item();\r\n\t\t\t})\r\n\t\t}\r\n\t}, [term, teacher]);\r\n\tconst memorized = useMemo(() => () => (\r\n\t\t<div>\r\n\t\t\t<Schedule\r\n\t\t\t\toff={off}\r\n\t\t\t\tdata={data}\r\n\t\t\t\tterm={term}\r\n\t\t\t\tsetTerm={setTerm}\r\n\t\t\t\tteacher={teacher}\r\n\t\t\t\tsetTeacher={setTeacher}\r\n\t\t\t\tteacherColor={teacherColor}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t), [data, term, teacher, teacherColor, off])\r\n\treturn (\r\n\t\t<Layout className=\"App\">\r\n\t\t\t<Header className='header'>\r\n\t\t\t\t<div style={{ float: 'left' }}>\r\n\t\t\t\t\t<img src={require('./img/img_kaikeba_logo_blue_new.png')} height={52} alt='' />\r\n\t\t\t\t</div>\r\n\t\t\t\t<div style={{ float: 'right' }}>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tstyle={{ marginRight: 20 }}\r\n\t\t\t\t\t\ttype='primary'\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetVisible(true);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t添加课程\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t{/*<Button\r\n\t\t\t\t\t\ttype='primary'\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetVisible(true);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t编辑课程\r\n\t\t\t\t\t</Button>*/}\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tstyle={{ marginRight: 20 }}\r\n\t\t\t\t\t\ttype='primary'\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetSingleVisible(true)\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t添加单节课程\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\tstyle={{ marginRight: 20 }}\r\n\t\t\t\t\t\ttype='primary'\r\n\t\t\t\t\t\tdanger\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\tsetExportVisible(true);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t导出\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button\r\n\t\t\t\t\t\ttype='default'\r\n\t\t\t\t\t\tdanger\r\n\t\t\t\t\t\tonClick={() => {\r\n\t\t\t\t\t\t\twindow.addEventListener('keydown', page);\r\n\t\t\t\t\t\t\tsetOff(true)\r\n\r\n\t\t\t\t\t\t\tModal.info({\r\n\t\t\t\t\t\t\t\ttitle: '使用文档',\r\n\t\t\t\t\t\t\t\tcontent: <Carousel ref={banner}>\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\tdocs.map(item => <div key={item}>\r\n\t\t\t\t\t\t\t\t\t\t\t<div style={{\r\n\t\t\t\t\t\t\t\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\t\t\t\t\t\t\t\theight: '80vh',\r\n\t\t\t\t\t\t\t\t\t\t\t\tbackground: `url(${require('./img/' + item + '.png')})`,\r\n\t\t\t\t\t\t\t\t\t\t\t\tbackgroundSize: '100% 100%'\r\n\t\t\t\t\t\t\t\t\t\t\t}} />\r\n\t\t\t\t\t\t\t\t\t\t</div>)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t</Carousel>,\r\n\t\t\t\t\t\t\t\twidth: '100%',\r\n\t\t\t\t\t\t\t\tonOk() {\r\n\t\t\t\t\t\t\t\t\tsetOff(false)\r\n\t\t\t\t\t\t\t\t\twindow.removeEventListener('keydown', page)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\t使用文档\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</div>\r\n\t\t\t</Header>\r\n\t\t\t<Layout>\r\n\t\t\t\t<Sider>\r\n\t\t\t\t\t<MenuList />\r\n\t\t\t\t</Sider>\r\n\t\t\t\t<Content\r\n\t\t\t\t\tstyle={{\r\n\t\t\t\t\t\tpadding: 24,\r\n\t\t\t\t\t\tmargin: 0,\r\n\t\t\t\t\t\tminHeight: 'calc(100vh - 64px)'\r\n\t\t\t\t\t}}\r\n\t\t\t\t>\r\n\t\t\t\t\t<Switch>\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\tpath='/schedule'\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\trender={memorized}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\tpath='/teacher'\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\tcomponent={() => (\r\n\t\t\t\t\t\t\t\t<Teacher\r\n\t\t\t\t\t\t\t\t\ttype='Teacher'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\tpath='/lesson'\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\tcomponent={() => (\r\n\t\t\t\t\t\t\t\t<Teacher\r\n\t\t\t\t\t\t\t\t\ttype='Lesson'\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\tpath='/calculate'\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\tcomponent={() => (\r\n\t\t\t\t\t\t\t\t<CalcTime />\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Route\r\n\t\t\t\t\t\t\tpath='/holiday'\r\n\t\t\t\t\t\t\texact\r\n\t\t\t\t\t\t\tcomponent={() => (\r\n\t\t\t\t\t\t\t\t<Holiday />\r\n\t\t\t\t\t\t\t)}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t<Redirect from='/' to='/schedule' />\r\n\t\t\t\t\t</Switch>\r\n\t\t\t\t</Content>\r\n\t\t\t</Layout>\r\n\t\t\t<LessonChange\r\n\t\t\t\tvisible={visible}\r\n\t\t\t\tsetVisible={setVisible}\r\n\t\t\t\taddLesson={addLesson}\r\n\t\t\t\tteacher={teacher}\r\n\t\t\t\tterm={term}\r\n\t\t\t\tgetData={getData}\r\n\t\t\t\tsetData={setData}\r\n\t\t\t/>\r\n\t\t\t<Modal\r\n\t\t\t\ttitle='导出课程表'\r\n\t\t\t\tvisible={exportVisible}\r\n\t\t\t\tonCancel={() => {\r\n\t\t\t\t\tsetExportVisible(false);\r\n\t\t\t\t}}\r\n\t\t\t\tonOk={() => {\r\n\t\t\t\t\taxios.get(`/getData?term=${exportTerm}&teacher=全部`)\r\n\t\t\t\t\t\t.then(({ data }) => {\r\n\t\t\t\t\t\t\tlet arr = [];\r\n\t\t\t\t\t\t\tlet res = data.data;\r\n\t\t\t\t\t\t\tlet first = moment(Object.entries(res)[0][0]);\r\n\t\t\t\t\t\t\tlet end = Object.entries(res)[Object.entries(res).length - 1][0];\r\n\t\t\t\t\t\t\tlet firstWeekday = first.weekday();\r\n\t\t\t\t\t\t\taddAllDay(first, end, res);\r\n\t\t\t\t\t\t\tfor (let i = 0; i < firstWeekday; i++) {\r\n\t\t\t\t\t\t\t\tlet subtract = moment(first);\r\n\t\t\t\t\t\t\t\tsubtract.subtract(i + 1, 'd');\r\n\t\t\t\t\t\t\t\tres[subtract.format('YYYY-MM-DD')] = [];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlet entryRes = Object.entries(res);\r\n\t\t\t\t\t\t\tentryRes = entryRes.sort((a, b) => moment(a[0]).isBefore(moment(b[0])) ? -1 : 1);\r\n\t\t\t\t\t\t\twhile (entryRes.length) {\r\n\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\tarr.push(entryRes.splice(0, 7));\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tif (arr[arr.length - 1].length < 7) {\r\n\t\t\t\t\t\t\t\tlet pushArr: any = [];\r\n\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\tfor (let i = 0; i < 7 - arr[arr.length - 1].length; i++) {\r\n\t\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\t\tlet time = moment(arr[arr.length - 1][arr[arr.length - 1].length - 1][0]);\r\n\t\t\t\t\t\t\t\t\ttime.add(i + 1, 'd');\r\n\t\t\t\t\t\t\t\t\tpushArr.push([time.format('YYYY-MM-DD'), []]);\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tpushArr.forEach(item => {\r\n\t\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\t\tarr[arr.length - 1].push(item);\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\tarr = arr.map(item => {\r\n\t\t\t\t\t\t\t\tlet dateData = {};\r\n\t\t\t\t\t\t\t\tlet weekData = {};\r\n\t\t\t\t\t\t\t\tlet lessonData = {};\r\n\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\titem.forEach((child, index) => {\r\n\t\t\t\t\t\t\t\t\tlet weekday: string = returnWeekday(index) as string;\r\n\t\t\t\t\t\t\t\t\tdateData[weekday] = child[0];\r\n\t\t\t\t\t\t\t\t\tweekData[weekday] = weekday;\r\n\t\t\t\t\t\t\t\t\tlessonData[weekday] = child[1].length ? child[1][0].lesson : isHoliday(child[0]) ? '放假' : '';\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\treturn [dateData, weekData, lessonData]\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\tarr = arr.flat();\r\n\t\t\t\t\t\t\tlet result = downloadExl(arr, 'xlsx');\r\n\t\t\t\t\t\t\tlet a = document.createElement('a');\r\n\t\t\t\t\t\t\ta.download = `${exportTerm}.xlsx`;\r\n\t\t\t\t\t\t\ta.href = result.href;\r\n\t\t\t\t\t\t\ta.click();\r\n\t\t\t\t\t\t\tresult.revoke();\r\n\t\t\t\t\t\t});\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<Form {...formItemLayout}>\r\n\t\t\t\t\t<Form.Item label='选择导出课程期数'>\r\n\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\tvalue={exportTerm}\r\n\t\t\t\t\t\t\tonChange={(val) => {\r\n\t\t\t\t\t\t\t\tsetExportTerm(val);\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\tallTermList.map(item => (\r\n\t\t\t\t\t\t\t\t\t<Select.Option\r\n\t\t\t\t\t\t\t\t\t\tkey={item}\r\n\t\t\t\t\t\t\t\t\t\tvalue={item}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{item}\r\n\t\t\t\t\t\t\t\t\t</Select.Option>\r\n\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Select>\r\n\t\t\t\t\t</Form.Item>\r\n\t\t\t\t</Form>\r\n\t\t\t</Modal>\r\n\t\t\t<Modal\r\n\t\t\t\ttitle='添加单节课程'\r\n\t\t\t\tvisible={singleVisible}\r\n\t\t\t\tonCancel={() => {\r\n\t\t\t\t\tsetSingleVisible(false)\r\n\t\t\t\t}}\r\n\t\t\t\tonOk={() => {\r\n\t\t\t\t\taxios({\r\n\t\t\t\t\t\tmethod: 'post',\r\n\t\t\t\t\t\turl: '/addSingleLesson',\r\n\t\t\t\t\t\tdata: singleData\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\tgetData(setData, term, teacher);\r\n\t\t\t\t\t\t\tsetSingleVisible(false)\r\n\t\t\t\t\t\t})\r\n\t\t\t\t}}\r\n\t\t\t>\r\n\t\t\t\t<Form {...formItemLayout}>\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tObject.keys(singleData).map(item => <Form.Item key={item} label={translateData(item)}>\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\titem === 'date' ?\r\n\t\t\t\t\t\t\t\t\t<DatePicker\r\n\t\t\t\t\t\t\t\t\t\tvalue={moment(singleData[item])}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(val) => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetSingleData({ ...singleData, date: (val as Moment).format('YYYY-MM-DD') });\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t/> :\r\n\t\t\t\t\t\t\t\t\t''\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\titem === 'lesson' ?\r\n\t\t\t\t\t\t\t\t\t<Input\r\n\t\t\t\t\t\t\t\t\t\tvalue={singleData[item] as string}\r\n\t\t\t\t\t\t\t\t\t\t// @ts-ignore\r\n\t\t\t\t\t\t\t\t\t\tonChange={throttle(({ target: { value } }) => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetSingleData({ ...singleData, lesson: value });\r\n\t\t\t\t\t\t\t\t\t\t})}\r\n\t\t\t\t\t\t\t\t\t/> :\r\n\t\t\t\t\t\t\t\t\t''\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t(item === 'term' || item === 'teacher') ?\r\n\t\t\t\t\t\t\t\t\t<Select\r\n\t\t\t\t\t\t\t\t\t\tvalue={singleData[item] as string}\r\n\t\t\t\t\t\t\t\t\t\tonChange={(val) => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetSingleData({ ...singleData, [item]: val });\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\t(item === 'term' ? allTermList : Object.keys(teacherColor).filter(item => item !== '全部')).map(item => (\r\n\t\t\t\t\t\t\t\t\t\t\t\t<Select.Option\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tkey={item}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tvalue={item}\r\n\t\t\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t{item}\r\n\t\t\t\t\t\t\t\t\t\t\t\t</Select.Option>\r\n\t\t\t\t\t\t\t\t\t\t\t))\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t</Select> :\r\n\t\t\t\t\t\t\t\t\t''\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\titem === 'replace' ?\r\n\t\t\t\t\t\t\t\t\t<Radio.Group\r\n\t\t\t\t\t\t\t\t\t\tvalue={singleData[item]}\r\n\t\t\t\t\t\t\t\t\t\tonChange={({ target: { value } }) => {\r\n\t\t\t\t\t\t\t\t\t\t\tsetSingleData({ ...singleData, replace: value })\r\n\t\t\t\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t<Radio\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={true}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t是\r\n\t\t\t\t\t\t\t\t\t\t</Radio>\r\n\t\t\t\t\t\t\t\t\t\t<Radio\r\n\t\t\t\t\t\t\t\t\t\t\tvalue={false}\r\n\t\t\t\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\t\t\t\t否\r\n\t\t\t\t\t\t\t\t\t\t</Radio>\r\n\t\t\t\t\t\t\t\t\t</Radio.Group> :\r\n\t\t\t\t\t\t\t\t\t''\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t</Form.Item>)\r\n\t\t\t\t\t}\r\n\t\t\t\t</Form>\r\n\t\t\t</Modal>\r\n\t\t</Layout>\r\n\t);\r\n};\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport {ConfigProvider} from \"antd\";\r\nimport {HashRouter} from \"react-router-dom\";\r\nimport zhCN from \"antd/es/locale/zh_CN\";\r\nimport moment from \"moment\";\r\nimport \"moment/locale/zh-cn\";\r\n\r\nmoment.locale('zh-cn');\r\n\r\nReactDOM.render(\r\n\t<ConfigProvider locale={zhCN}>\r\n\t\t<HashRouter>\r\n\t\t\t<App />\r\n\t\t</HashRouter>\r\n\t</ConfigProvider>\r\n\t, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}